<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dungeon Mini - –û—Ç–ª–∞–¥–∫–∞</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1e3c72;
            color: white;
            margin: 0;
            padding: 20px;
        }
        .debug-panel {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        button {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        button:hover {
            background: #ff8e57;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: rgba(78, 205, 196, 0.3); }
        .error { background: rgba(255, 107, 107, 0.3); }
        .warning { background: rgba(255, 215, 0, 0.3); }
        
        /* –ö–æ–ø–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏–≥—Ä—ã */
        .screen { display: block; }
        .screen.hidden { display: none; }
        #main-menu { display: block; }
        #game-section { display: none; }
    </style>
</head>
<body>
    <h1>üêõ Dungeon Mini - –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å</h1>
    
    <div class="debug-panel">
        <h2>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º</h2>
        
        <button onclick="checkFiles()">1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã</button>
        <button onclick="checkJavaScript()">2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å JavaScript</button>
        <button onclick="checkCSS()">3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSS</button>
        <button onclick="testGameInit()">4. –¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä—ã</button>
        <button onclick="startSimpleGame()">5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Å—Ç–æ—é –∏–≥—Ä—É</button>
        
        <div id="status-output"></div>
    </div>

    <!-- –ú–∏–Ω–∏-–≤–µ—Ä—Å–∏—è –∏–≥—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="game-section" class="screen hidden">
        <div class="debug-panel">
            <h2>–ü—Ä–æ—Å—Ç–∞—è –∏–≥—Ä–∞</h2>
            <p><strong>–ü–µ—Ä—Å–æ–Ω–∞–∂:</strong> <span id="player-info">–ì–µ—Ä–æ–π</span></p>
            <p><strong>–õ–æ–∫–∞—Ü–∏—è:</strong> <span id="location-info">–ü–ª–æ—â–∞–¥—å</span></p>
            
            <input type="text" id="command-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É..." style="width: 300px; padding: 10px;">
            <button onclick="executeSimpleCommand()">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
            
            <div id="game-log" style="background: rgba(0,0,0,0.5); padding: 10px; margin-top: 10px; height: 200px; overflow-y: auto;"></div>
        </div>
    </div>

    <script>
        function log(message, type = 'success') {
            const output = document.getElementById('status-output');
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = new Date().toLocaleTimeString() + ': ' + message;
            output.appendChild(div);
            output.scrollTop = output.scrollHeight;
        }

        function checkFiles() {
            log('–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∏–ª–∏
            const cssLink = document.querySelector('link[href="styles.css"]');
            if (cssLink) {
                log('‚úÖ CSS —Ñ–∞–π–ª –ø–æ–¥–∫–ª—é—á–µ–Ω');
            } else {
                log('‚ùå CSS —Ñ–∞–π–ª –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω', 'error');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∫—Ä–∏–ø—Ç
            const scripts = document.querySelectorAll('script[src]');
            log(`–ù–∞–π–¥–µ–Ω–æ ${scripts.length} –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤`);
            
            log('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
        }

        function checkJavaScript() {
            log('–ü—Ä–æ–≤–µ—Ä—è–µ–º JavaScript...');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã
                if (typeof showCommands === 'function') {
                    log('‚úÖ showCommands –Ω–∞–π–¥–µ–Ω–∞');
                } else {
                    log('‚ùå showCommands –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
                }
                
                if (typeof startGame === 'function') {
                    log('‚úÖ startGame –Ω–∞–π–¥–µ–Ω–∞');
                } else {
                    log('‚ùå startGame –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
                }
                
                if (typeof DungeonGame === 'function') {
                    log('‚úÖ DungeonGame –Ω–∞–π–¥–µ–Ω–∞');
                } else {
                    log('‚ùå DungeonGame –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
                }
                
            } catch (error) {
                log('‚ùå –û—à–∏–±–∫–∞ JavaScript: ' + error.message, 'error');
            }
            
            log('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ JavaScript –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
        }

        function checkCSS() {
            log('–ü—Ä–æ–≤–µ—Ä—è–µ–º CSS...');
            
            const bodyStyles = window.getComputedStyle(document.body);
            const bgColor = bodyStyles.backgroundColor;
            
            if (bgColor && bgColor !== 'rgba(0, 0, 0, 0)') {
                log('‚úÖ CSS –∑–∞–≥—Ä—É–∂–µ–Ω (—Ñ–æ–Ω: ' + bgColor + ')');
            } else {
                log('‚ùå CSS –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Ç–∏–ª—è–º–∏', 'error');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É —à—Ä–∏—Ñ—Ç–æ–≤
            const fonts = ['Orbitron', 'Roboto'];
            fonts.forEach(font => {
                if (document.fonts && document.fonts.check) {
                    if (document.fonts.check('16px ' + font)) {
                        log(`‚úÖ –®—Ä–∏—Ñ—Ç ${font} –∑–∞–≥—Ä—É–∂–µ–Ω`);
                    } else {
                        log(`‚ö†Ô∏è –®—Ä–∏—Ñ—Ç—É ${font} –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è`, 'warning');
                    }
                }
            });
            
            log('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ CSS –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
        }

        function testGameInit() {
            log('–¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏–≥—Ä—ã...');
            
            try {
                if (typeof window.game !== 'undefined') {
                    log('‚ùå –ò–≥—Ä–∞ —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.', 'warning');
                    return;
                }
                
                // –ü—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –∏–≥—Ä—ã
                if (typeof DungeonGame === 'function') {
                    window.game = new DungeonGame();
                    log('‚úÖ –ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!');
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã
                    if (typeof window.game.updateUI === 'function') {
                        log('‚úÖ updateUI –º–µ—Ç–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω');
                    }
                    
                    if (typeof window.game.executeCommand === 'function') {
                        log('‚úÖ executeCommand –º–µ—Ç–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω');
                    }
                    
                } else {
                    log('‚ùå DungeonGame –∫–ª–∞—Å—Å –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                }
                
            } catch (error) {
                log('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ' + error.message, 'error');
            }
            
            log('‚úÖ –¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω');
        }

        let simpleGame = {
            player: { name: '–¢–µ—Å—Ç–æ–≤—ã–π –≥–µ—Ä–æ–π', hp: 20, level: 1 },
            location: '–ü–ª–æ—â–∞–¥—å',
            log: []
        };

        function startSimpleGame() {
            log('–ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Å—Ç—É—é –∏–≥—Ä–æ–≤—É—é –≤–µ—Ä—Å–∏—é...');
            
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('game-section').classList.remove('hidden');
            
            updateSimpleGameUI();
            log('üéÆ –ü—Ä–æ—Å—Ç–∞—è –∏–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã: look, move north, test');
            log('–ö–æ–º–∞–Ω–¥—ã: look, move north, help, test', 'warning');
        }

        function updateSimpleGameUI() {
            document.getElementById('player-info').textContent = 
                `${simpleGame.player.name} (HP: ${simpleGame.player.hp}, Level: ${simpleGame.player.level})`;
            document.getElementById('location-info').textContent = simpleGame.location;
            
            const logDiv = document.getElementById('game-log');
            logDiv.innerHTML = simpleGame.log.map(msg => 
                `<div>${new Date().toLocaleTimeString()}: ${msg}</div>`
            ).join('');
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function executeSimpleCommand() {
            const input = document.getElementById('command-input');
            const command = input.value.trim();
            
            if (!command) return;
            
            input.value = '';
            addSimpleGameLog(`> ${command}`);
            
            switch (command.toLowerCase()) {
                case 'look':
                    addSimpleGameLog('üëÅÔ∏è –û—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ—Å—å: –ü–ª–æ—â–∞–¥—å —Å —Ñ–æ–Ω—Ç–∞–Ω–æ–º');
                    break;
                case 'north':
                case 'move north':
                    simpleGame.location = '–õ–µ—Å';
                    addSimpleGameLog('‚û°Ô∏è –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –≤ –ª–µ—Å');
                    updateSimpleGameUI();
                    break;
                case 'help':
                    addSimpleGameLog('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: look, north, help, test');
                    break;
                case 'test':
                    addSimpleGameLog('üß™ –¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!');
                    break;
                default:
                    addSimpleGameLog(`‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: ${command}`);
            }
        }

        function addSimpleGameLog(message) {
            simpleGame.log.push(message);
            if (simpleGame.log.length > 20) {
                simpleGame.log.shift(); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –ª–æ–≥–∞
            }
            updateSimpleGameUI();
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            log('üåê –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            setTimeout(checkFiles, 100);
            setTimeout(checkCSS, 200);
            setTimeout(checkJavaScript, 500);
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è Enter –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
        document.getElementById('command-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                executeSimpleCommand();
            }
        });
    </script>
</body>
</html>
