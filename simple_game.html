<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dungeon Mini - –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .game-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .game-title {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 1rem;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .game-subtitle {
            font-size: 1.2rem;
            color: #b0c4de;
        }
        
        .game-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
            backdrop-filter: blur(10px);
        }
        
        .character-display {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .character-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .stat-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #b0c4de;
            margin-bottom: 0.5rem;
        }
        
        .stat-value {
            font-size: 1.3rem;
            font-weight: 700;
        }
        
        .stat-hp { color: #ff6b6b; }
        .stat-attack { color: #4ecdc4; }
        .stat-level { color: #ffd700; }
        .stat-xp { color: #9d4edd; }
        
        .location-visual {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .location-art {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.8rem;
            line-height: 1.3;
            background: rgba(0, 0, 0, 0.4);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            white-space: pre;
        }
        
        .inventory-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .inventory-slot {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .inventory-slot:hover {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .item-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .item-name {
            font-size: 0.9rem;
            font-weight: 500;
            color: white;
            line-height: 1.2;
        }
        
        .command-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
        }
        
        .command-box {
            display: flex;
            margin-bottom: 1rem;
        }
        
        .command-box input {
            flex: 1;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px 0 0 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            outline: none;
        }
        
        .command-box input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .command-box button {
            padding: 12px 20px;
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            font-size: 1rem;
        }
        
        .output-section {
            background: rgba(0, 0, 0, 0.4);
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1rem;
        }
        
        .game-output {
            background: rgba(0, 0, 0, 0.6);
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            max-height: 300px;
            overflow-y: auto;
            color: #00ff88;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 8px;
            display: inline-block;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #ff6b35 100%, #ff8e53);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .hidden { display: none !important; }
        
        @media (max-width: 768px) {
            .game-title { font-size: 2rem; }
            .character-stats { grid-template-columns: 1fr; }
            .container { padding: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="main-menu">
            <div class="game-header">
                <h1 class="game-title">üè∞ DUNGEON MINI üè∞</h1>
                <p class="game-subtitle">–ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π</p>
            </div>
            
            <div style="text-align: center;">
                <button class="btn btn-primary" onclick="startSimpleGame()">üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                <button class="btn btn-primary" onclick="showCommands()">üìã –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥</button>
            </div>
            
            <div id="commands-help" class="hidden" style="background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 15pxÁöÑ; margin-top: 2rem;">
                <h2>üìã –ö–æ–º–∞–Ω–¥—ã –∏–≥—Ä—ã</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
                    <div><strong>look</strong> - –û—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è</div>
                    <div><strong>move north/south/east/west</strong> - –î–≤–∏–∂–µ–Ω–∏–µ</div>
                    <div><strong>take &lt;–ø—Ä–µ–¥–º–µ—Ç&gt;</strong> - –í–∑—è—Ç—å –ø—Ä–µ–¥–º–µ—Ç</div>
                    <div><strong>use &lt;–ø—Ä–µ–¥–º–µ—Ç&gt;</strong> - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</div>
                    <div><strong>inventory</strong> - –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
                    <div><strong>whoami</strong> - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ</div>
                    <div><strong>fight</strong> - –°—Ä–∞–∑–∏—Ç—å—Å—è —Å –º–æ–Ω—Å—Ç—Ä–æ–º</div>
                    <div><strong>help</strong> - –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞</div>
                </div>
                <button class="btn btn-primary" onclick="hideCommands()" style="margin-top: 1rem;">‚Üê –ó–∞–∫—Ä—ã—Ç—å —Å–ø—Ä–∞–≤–∫—É</button>
            </div>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
        <div id="game-section" class="hidden">
            <!-- –ü–µ—Ä—Å–æ–Ω–∞–∂ -->
            <div class="character-display">
                <h3 id="character-class">üó°Ô∏è –í–æ–∏–Ω 1 —É—Ä–æ–≤–Ω—è</h3>
                <div class="character-stats">
                    <div class="stat-bar stat-hp">
                        <div class="stat-label">‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</div>
                        <div class="stat-value" id="detailed-hp">20/20</div>
                    </div>
                    <div class="stat-bar stat-attack">
                        <div class="stat-label">‚öîÔ∏è –ê—Ç–∞–∫–∞</div>
                        <div class="stat-value" id="detailed-attack">5</div>
                    </div>
                    <div class="stat-bar stat-level">
                        <div class="stat-label">‚≠ê –£—Ä–æ–≤–µ–Ω—å</div>
                        <div class="stat-value" id="detailed-level">1</div>
                    </div>
                    <div class="stat-bar stat-xp">
                        <div class="stat-label">‚ú® –û–ø—ã—Ç</div>
                        <div class="stat-value" id="detailed-xp">0/100</div>
                    </div>
                </div>
            </div>

            <!-- –õ–æ–∫–∞—Ü–∏—è -->
            <div id="location-visual" class="location-visual">
                <h3 id="location-name">–ü–ª–æ—â–∞–¥—å</h3>
                <div id="location-art" class="location-art">
üèõÔ∏è –ü–ª–æ—â–∞–¥—å
/‚ñà‚ñà\
/‚ñà‚ñà‚ñà‚ñà\
üåäüíßüåä
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üö™    –ù    üö™
                </div>
                <p id="location-description">–ö–∞–º–µ–Ω–Ω–∞—è –ø–ª–æ—â–∞–¥—å —Å —Ñ–æ–Ω—Ç–∞–Ω–æ–º. –ó–¥–µ—Å—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤–∞—à–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ.</p>
                
                <div id="location-items" style="margin: 1rem 0; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 8px;"></div>
                <div id="location-monster" style="margin: 1rem 0; padding: 1rem; background: rgba(255,107,107,0.1); border-radius: 8px;"></div>
            </div>

            <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
            <div class="inventory-section">
                <h4>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å:</h4>
                <div id="detailed-inventory-grid" class="inventory-grid"></div>
            </div>

            <!-- –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ -->
            <div class="command-section">
                <h4>üéÆ –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞:</h4>
                <div class="command-box">
                    <input type="text" id="command-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: hello –ú–æ–µ–ò–º—è –∏–ª–∏ look..." autocomplete="off">
                    <button onclick="executeCommand()">‚ñ∂Ô∏è –í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
                </div>
            </div>

            <!-- –ñ—É—Ä–Ω–∞–ª -->
            <div class="output-section">
                <h4>üìú –ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π:</h4>
                <div id="game-output" class="game-output">
=== –ü–û–ü–†–û–°–¢–´ –¶–í–ï–ù–¢–†–û DUNGEON MINI ===
–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!

–î–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã –≤–≤–µ–¥–∏—Ç–µ:
hello –ò–º—è–í–∞—à–µ–≥–æ–ü–µ—Ä—Å–æ–Ω–∞–∂–∞

–í–≤–µ–¥–∏—Ç–µ 'help' –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="backToMenu()">üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
                <button class="btn btn-primary" onclick="restartGame()">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            </div>
        </div>
    </div>

    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –∏–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
        class SimpleDungeonGame {
            constructor() {
                this.gameState = {
                    player: {
                        name: '–ì–µ—Ä–æ–π',
                        hp: 20,
                        maxHp: 20,
                        attack: 5,
                        level: 1,
                        xp: 0,
                        xpToNext: 100,
                        class: '–í–æ–∏–Ω',
                        inventory: []
                    },
                    currentLocation: '–ü–ª–æ—â–∞–¥—å',
                    score: 0,
                    world: {
                        '–ü–ª–æ—â–∞–¥—å': {
                            name: '–ü–ª–æ—â–∞–¥—å',
                            description: '–ö–∞–º–µ–Ω–Ω–∞—è –ø–ª–æ—â–∞–¥—å —Å —Ñ–æ–Ω—Ç–∞–Ω–æ–º. –ó–¥–µ—Å—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤–∞—à–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ.',
                            art: `üèõÔ∏è –ü–ª–æ—â–∞–¥—å
/‚ñà‚ñà\\
/‚ñà‚ñà‚ñà‚ñà\\
üåäüíßüåä
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üö™    –ù    üö™`,
                            exits: { north: '–õ–µ—Å' },
                            items: [],
                            monster: null
                        },
                        '–õ–µ—Å': {
                            name: '–õ–µ—Å',
                            description: '–ó–∞–≥–∞–¥–æ—á–Ω—ã–π –ª–µ—Å —Å —à–µ–ª–µ—Å—Ç–æ–º –ª–∏—Å—Ç–≤—ã.',
                            art: `üå≥üå≤üå≥
üåøüåøü¶ÖüêøÔ∏èüåø
üîÆüîÆüçÑüîÆüîÆ
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`,
                            exits: { south: '–ü–ª–æ—â–∞–¥—å', east: '–ü–µ—â–µ—Ä–∞' },
                            items: [
                                { type: 'potion', name: '–ú–∞–ª–æ–µ –∑–µ–ª—å–µ', heal: 5 },
                                { type: 'key', name: '–ó–æ–ª–æ—Ç–æ–π –∫–ª—é—á', canOpen: ['–ü–µ—â–µ—Ä–∞->–°–æ–∫—Ä–æ–≤–∏—â–Ω–∏—Ü–∞'] }
                            ],
                            monster: { name: '–í–æ–ª–∫', level: 1, hp: 8 }
                        },
                        '–ü–µ—â–µ—Ä–∞': {
                            name: '–ü–µ—â–µ—Ä–∞',
                            description: '–¢–µ–º–Ω–∞—è –∏ —Å—ã—Ä–∞—è –ø–µ—â–µ—Ä–∞',
                            art: `üî¶üíÄüëπüíÄüî¶
‚ñì‚ñì‚ñìüíé‚ñì‚ñì‚ñì
‚ñì‚ñì‚ñë‚ñë‚ñë‚ñì‚ñì‚ñì
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`,
                            exits: { west: '–õ–µ—Å' },
                            items: [
                                { type: 'weapon', name: '–†–∂–∞–≤—ã–π –º–µ—á', attackBonus: 2 }
                            ],
                            monster: { name: '–ì–æ–±–ª–∏–Ω—É', level: 2, hp: 12 }
                        }
                    }
                };
            }

            updateUI() {
                const player = this.gameState.player;
                const location = this.gameState.world[this.gameState.currentLocation];

                // –û–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
                document.getElementById('character-class').textContent = `üó°Ô∏è ${player.class} ${player.level} —É—Ä–æ–≤–Ω—è`;
                document.getElementById('detailed-hp').textContent = `${player.hp}/${player.maxHp}`;
                document.getElementById('detailed-attack').textContent = player.attack;
                document.getElementById('detailed-level').textContent = player.level;
                document.getElementById('detailed-xp').textContent = `${player.xp}/${player.xpToNext}`;

                // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞—Ü–∏
                document.getElementById('location-name').textContent = location.name;
                document.getElementById('location-art').textContent = location.art;
                document.getElementById('location-description').textContent = location.description;

                // –ü—Ä–µ–¥–º–µ—Ç—ã –≤ –ª–æ–∫–∞—Ü–∏–∏
                const itemsContainer = document.getElementById('location-items');
                if (location.items.length > 0) {
                    itemsContainer.innerHTML = 'üéí ' + location.items.map(item => item.name).join(', ');
                } else {
                    itemsContainer.innerHTML = '<span style="color: #999;">–ü—Ä–µ–¥–º–µ—Ç–æ–≤ –Ω–µ—Ç</span>';
                }

                // –ú–æ–Ω—Å—Ç—Ä—ã
                const monsterContainer = document.getElementById('location-monster');
                if (location.monster) {
                    monsterContainer.innerHTML = `üëπ –ú–æ–Ω—Å—Ç—Ä: ${location.monster.name} (–£—Ä–æ–≤–µ–Ω—å ${location.monster.level}, HP: ${location.monster.hp})`;
                } else {
                    monsterContainer.innerHTML = '<span style="color: #999;">–ú–æ–Ω—Å—Ç—Ä–æ–≤ –Ω–µ—Ç</span>';
                }

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                this.updateInventory();
            }

            updateInventory() {
                const container = document.getElementById('detailed-inventory-grid');
                const inventory = this.gameState.player.inventory;

                container.innerHTML = '';
                
                for (let i = 0; i < 8; i++) {
                    const slot = document.createElement('div');
                    slot.className = 'inventory-slot';
                    
                    if (i < inventory.length) {
                        const item = inventory[i];
                        const iconMap = { weapon: '‚öîÔ∏è', potion: 'üß™', key: 'üîë' };
                        
                        slot.innerHTML = `
                            <div class="item-icon">${iconMap[item.type] || 'üì¶'}</div>
                            <div class="item-name">${item.name}</div>
                        `;
                        
                        slot.onclick = () => this.useItem(item.name);
                    } else {
                        slot.innerHTML = '<div style="color: #666;">–ü—É—Å—Ç–æ</div>';
                    }
                    
                    container.appendChild(slot);
                }
            }

            executeCommand(input) {
                const parts = input.trim().split(' ');
                const command = parts[0].toLowerCase();
                const args = parts.slice(1);

                if (command === 'hello' && args.length > 0) {
                    this.gameState.player.name = args.join(' ');
                    this.addOutput(`‚úÖ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${this.gameState.player.name}!`);
                    this.addOutput('–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –º–∏—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ: look, move north');
                    
                } else if (command === 'look') {
                    const location = this.gameState.world[this.gameState.currentLocation];
                    this.addOutput(`üìç ${location.name}: ${location.description}`);
                    if (location.items.length > 0) {
                        this.addOutput(`üéí –ü—Ä–µ–¥–º–µ—Ç—ã: ${location.items.map(item => item.name).join(', ')}`);
                    }
                    if (location.monster) {
                        this.addOutput(`üëπ –ú–æ–Ω—Å—Ç—Ä: ${location.monster.name} (–£—Ä–æ–≤–µ–Ω—å ${location.monster.level})`);
                    }
                    
                } else if (command === 'move') {
                    if (args.length === 0) {
                        this.addOutput('‚ùå –£–∫–∞–∂–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: north, south, east, west');
                        return;
                    }
                    
                    const direction = args[0];
                    const location = this.gameState.world[this.gameState.currentLocation];
                    
                    if (!location.exits[direction]) {
                        this.addOutput(`‚ùå –ù–µ—Ç –≤—ã—Ö–æ–¥–∞ –Ω–∞ ${direction}`);
                        return;
                    }
                    
                    this.gameState.currentLocation = location.exits[direction];
                    this.addOutput(`‚û°Ô∏è –ü–µ—Ä–µ—Ö–æ–¥ –≤: ${this.gameState.currentLocation}`);
                    
                } else if (command === 'take') {
                    this.takeItem(args.join(' '));
                    
                } else if (command === 'use') {
                    this.useItem(args.join(' '));
                    
                } else if (command === 'inventory') {
                    this.showInventory();
                    
                } else if (command === 'whoami') {
                    const player = this.gameState.player;
                    this.addOutput(`üë§ ${player.name} (${player.class})`);
                    this.addOutput(`‚ù§Ô∏è HP: ${player.hp}/${player.maxHp} | ‚öîÔ∏è –ê—Ç–∞–∫–∞: ${player.attack}`);
                    this.addOutput(`‚≠ê –£—Ä–æ–≤–µ–Ω—å ${player.level} | ‚ú® –û–ø—ã—Ç: ${player.xp}/${player.xpToNext}`);
                    this.addOutput(`üéí –ü—Ä–µ–¥–º–µ—Ç–æ–≤: ${player.inventory.length}/8`);
                    
                } else if (command === 'help') {
                    this.showHelp();
                    
                } else {
                    this.addOutput(`‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: ${command}`);
                    this.addOutput('–í–≤–µ–¥–∏—Ç–µ help –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏');
                }

                this.updateUI();
            }

            takeItem(itemName) {
                const location = this.gameState.world[this.gameState.currentLocation];
                const player = this.gameState.player;

                if (player.inventory.length >= 8) {
                    this.addOutput('‚ùå –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ–ª–æ–Ω!');
                    return;
                }

                const itemIndex = location.items.findIndex(item => 
                    item.name.toLowerCase() === itemName.toLowerCase()
                );

                if (itemIndex === -1) {
                    this.addOutput(`‚ùå –ü—Ä–µ–¥–º–µ—Ç '${itemName}' –Ω–µ –Ω–∞–π–¥–µ–Ω`);
                    return;
                }

                const item = location.items.splice(itemIndex, 1)[0];
                player.inventory.push(item);
                
                this.addOutput(`‚úÖ –í–∑—è—Ç–æ: ${item.name}`);
                this.gameState.score += 2;
            }

            showInventory() {
                const inventory = this.gameState.player.inventory;

                if (inventory.length === 0) {
                    this.addOutput('üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç');
                    return;
                }

                this.addOutput('üéí –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è:');
                inventory.forEach(item => {
                    this.addOutput(`- ${item.name}`);
                });
            }

            useItem(itemName) {
                const player = this.gameState.player;
                
                const itemIndex = player.inventory.findIndex(item => 
                    item.name.toLowerCase() === itemName.toLowerCase()
                );

                if (itemIndex === -1) {
                    this.addOutput(`‚ùå –ü—Ä–µ–¥–º–µ—Ç '${itemName}' –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ`);
                    return;
                }

                const item = player.inventory[itemIndex];
                
                switch (item.type) {
                    case 'potion':
                        const healAmount = Math.min(item.heal, player.maxHp - player.hp);
                        player.hp += healAmount;
                        this.addOutput(`üß™ –í—ã–ø–∏—Ç–æ ${item.name}: +${healAmount} HP. –¢–µ–∫—É—â–µ–µ HP: ${player.hp}`);
                        break;
                        
                    case 'weapon':
                        player.attack += item.attackBonus;
                        this.addOutput(`‚öîÔ∏è –≠–∫–∏–ø–∏—Ä–æ–≤–∞–Ω–æ ${item.name}: +${item.attackBonus} –∞—Ç–∞–∫–∞. –ê—Ç–∞–∫–∞ —Ç–µ–ø–µ—Ä—å: ${player.attack}`);
                        break;
                        
                    case 'key':
                        this.addOutput(`üîë –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ${item.name}. –ì–¥–µ-—Ç–æ —Ä–∞—Å–ø–∞—Ö–Ω—É–ª–∞—Å—å –¥–≤–µ—Ä—å...`);
                        break;
                }
                
                player.inventory.splice(itemIndex, 1);
                this.updateUI();
            }

            showHelp() {
                this.addOutput('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:');
                this.addOutput('hello <–∏–º—è> - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞');
                this.addOutput('look - –û—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è');
                this.addOutput('move <–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ> - –î–≤–∏–∂–µ–Ω–∏–µ (north/south/east/west)');
                this.addOutput('take <–ø—Ä–µ–¥–º–µ—Ç> - –í–∑—è—Ç—å –ø—Ä–µ–¥–º–µ—Ç');
                this.addOutput('use <–ø—Ä–µ–¥–º–µ—Ç> - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç');
                this.addOutput('inventory - –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å');
                this.addOutput('whoami - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ');
                this.addOutput('help - –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞');
            }

            addOutput(message) {
                const output = document.getElementById('game-output');
                const div = document.createElement('div');
                div.textContent = message;
                output.appendChild(div);
                output.scrollTop = output.scrollHeight;
            }

            restartGame() {
                this.gameState.player.name = '–ì–µ—Ä–æ–π';
                this.gameState.player.hp = 20;
                this.gameState.player.maxHp = 20;
                this.gameState.player.attack = 5;
                this.gameState.player.level = 1;
                this.gameState.player.xp = 0;
                this.gameState.player.xpToNext = 100;
                this.gameState.player.inventory = [];
                this.gameState.score = 0;
                this.gameState.currentLocation = '–ü–ª–æ—â–∞–¥—å';
                
                document.getElementById('game-output').innerHTML = '=== –ù–û–í–ê–Ø –ò–ì–†–ê ===';
                this.updateUI();
            }
        }

        // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∏–≥—Ä—ã
        let simpleGame = new SimpleDungeonGame();

        function startSimpleGame() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('game-section').classList.remove('hidden');
            simpleGame.updateUI();
        }

        function backToMenu() {
            document.getElementById('game-section').classList.add('hidden');
            document.getElementById('main-menu').classList.remove('hidden');
        }

        function restartGame() {
            simpleGame.restartGame();
        }

        function executeCommand() {
            const input = document.getElementById('command-input').value.trim();
            if (!input) return;

            document.getElementById('command-input').value = '';
            simpleGame.addOutput(`> ${input}`);
            simpleGame.executeCommand(input);
        }

        function showCommands() {
            document.getElementById('commands-help').classList.remove('hidden');
        }

        function hideCommands() {
            document.getElementById('commands-help').classList.add('hidden');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter
        document.getElementById('command-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                executeCommand();
            }
        });
    </script>
</body>
</html>
